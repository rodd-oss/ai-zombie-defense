// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: loadouts.sql

package generated

import (
	"context"
)

const createLoadout = `-- name: CreateLoadout :exec
INSERT INTO loadouts (player_id, name, is_active) VALUES (?, ?, ?)
`

type CreateLoadoutParams struct {
	PlayerID int64  `json:"player_id"`
	Name     string `json:"name"`
	IsActive int64  `json:"is_active"`
}

func (q *Queries) CreateLoadout(ctx context.Context, db DBTX, arg *CreateLoadoutParams) error {
	_, err := db.ExecContext(ctx, createLoadout, arg.PlayerID, arg.Name, arg.IsActive)
	return err
}

const deleteLoadoutCosmeticBySlot = `-- name: DeleteLoadoutCosmeticBySlot :exec
DELETE FROM loadout_cosmetics WHERE loadout_id = ? AND slot = ?
`

type DeleteLoadoutCosmeticBySlotParams struct {
	LoadoutID int64  `json:"loadout_id"`
	Slot      string `json:"slot"`
}

func (q *Queries) DeleteLoadoutCosmeticBySlot(ctx context.Context, db DBTX, arg *DeleteLoadoutCosmeticBySlotParams) error {
	_, err := db.ExecContext(ctx, deleteLoadoutCosmeticBySlot, arg.LoadoutID, arg.Slot)
	return err
}

const getActiveLoadout = `-- name: GetActiveLoadout :one
SELECT loadout_id, player_id, name, is_active, created_at, updated_at FROM loadouts WHERE player_id = ? AND is_active = 1
`

func (q *Queries) GetActiveLoadout(ctx context.Context, db DBTX, playerID int64) (*Loadout, error) {
	row := db.QueryRowContext(ctx, getActiveLoadout, playerID)
	var i Loadout
	err := row.Scan(
		&i.LoadoutID,
		&i.PlayerID,
		&i.Name,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return &i, err
}

const getCosmeticItem = `-- name: GetCosmeticItem :one
SELECT cosmetic_id, name, description, slot, category, rarity, unlock_level, data_cost, is_prestige_only, created_at FROM cosmetic_items WHERE cosmetic_id = ?
`

func (q *Queries) GetCosmeticItem(ctx context.Context, db DBTX, cosmeticID int64) (*CosmeticItem, error) {
	row := db.QueryRowContext(ctx, getCosmeticItem, cosmeticID)
	var i CosmeticItem
	err := row.Scan(
		&i.CosmeticID,
		&i.Name,
		&i.Description,
		&i.Slot,
		&i.Category,
		&i.Rarity,
		&i.UnlockLevel,
		&i.DataCost,
		&i.IsPrestigeOnly,
		&i.CreatedAt,
	)
	return &i, err
}

const getLoadoutCosmeticBySlot = `-- name: GetLoadoutCosmeticBySlot :one
SELECT lc.loadout_id, lc.cosmetic_id, lc.slot FROM loadout_cosmetics lc
WHERE lc.loadout_id = ? AND lc.slot = ?
`

type GetLoadoutCosmeticBySlotParams struct {
	LoadoutID int64  `json:"loadout_id"`
	Slot      string `json:"slot"`
}

func (q *Queries) GetLoadoutCosmeticBySlot(ctx context.Context, db DBTX, arg *GetLoadoutCosmeticBySlotParams) (*LoadoutCosmetic, error) {
	row := db.QueryRowContext(ctx, getLoadoutCosmeticBySlot, arg.LoadoutID, arg.Slot)
	var i LoadoutCosmetic
	err := row.Scan(&i.LoadoutID, &i.CosmeticID, &i.Slot)
	return &i, err
}

const getLoadoutCosmetics = `-- name: GetLoadoutCosmetics :many
SELECT lc.loadout_id, lc.cosmetic_id, lc.slot, ci.slot AS cosmetic_slot FROM loadout_cosmetics lc
JOIN cosmetic_items ci ON lc.cosmetic_id = ci.cosmetic_id
WHERE lc.loadout_id = ?
`

type GetLoadoutCosmeticsRow struct {
	LoadoutID    int64  `json:"loadout_id"`
	CosmeticID   int64  `json:"cosmetic_id"`
	Slot         string `json:"slot"`
	CosmeticSlot string `json:"cosmetic_slot"`
}

func (q *Queries) GetLoadoutCosmetics(ctx context.Context, db DBTX, loadoutID int64) ([]*GetLoadoutCosmeticsRow, error) {
	rows, err := db.QueryContext(ctx, getLoadoutCosmetics, loadoutID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []*GetLoadoutCosmeticsRow{}
	for rows.Next() {
		var i GetLoadoutCosmeticsRow
		if err := rows.Scan(
			&i.LoadoutID,
			&i.CosmeticID,
			&i.Slot,
			&i.CosmeticSlot,
		); err != nil {
			return nil, err
		}
		items = append(items, &i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getPlayerLoadouts = `-- name: GetPlayerLoadouts :many
SELECT loadout_id, player_id, name, is_active, created_at, updated_at FROM loadouts WHERE player_id = ? ORDER BY loadout_id
`

func (q *Queries) GetPlayerLoadouts(ctx context.Context, db DBTX, playerID int64) ([]*Loadout, error) {
	rows, err := db.QueryContext(ctx, getPlayerLoadouts, playerID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []*Loadout{}
	for rows.Next() {
		var i Loadout
		if err := rows.Scan(
			&i.LoadoutID,
			&i.PlayerID,
			&i.Name,
			&i.IsActive,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, &i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertLoadoutCosmetic = `-- name: InsertLoadoutCosmetic :exec
INSERT INTO loadout_cosmetics (loadout_id, cosmetic_id, slot) VALUES (?, ?, ?)
`

type InsertLoadoutCosmeticParams struct {
	LoadoutID  int64  `json:"loadout_id"`
	CosmeticID int64  `json:"cosmetic_id"`
	Slot       string `json:"slot"`
}

func (q *Queries) InsertLoadoutCosmetic(ctx context.Context, db DBTX, arg *InsertLoadoutCosmeticParams) error {
	_, err := db.ExecContext(ctx, insertLoadoutCosmetic, arg.LoadoutID, arg.CosmeticID, arg.Slot)
	return err
}

const updateLoadoutActive = `-- name: UpdateLoadoutActive :exec
UPDATE loadouts SET is_active = ? WHERE loadout_id = ? AND player_id = ?
`

type UpdateLoadoutActiveParams struct {
	IsActive  int64 `json:"is_active"`
	LoadoutID int64 `json:"loadout_id"`
	PlayerID  int64 `json:"player_id"`
}

func (q *Queries) UpdateLoadoutActive(ctx context.Context, db DBTX, arg *UpdateLoadoutActiveParams) error {
	_, err := db.ExecContext(ctx, updateLoadoutActive, arg.IsActive, arg.LoadoutID, arg.PlayerID)
	return err
}
